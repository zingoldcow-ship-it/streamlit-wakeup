name: Wake up Streamlit app

on:
  schedule:
    - cron: "*/20 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit app
        run: |
          APP_URL="https://book-url-autofill-webapp-grlgymkppd2pvqefwwrd7c.streamlit.app/healthz"
          TS=$(date +%s)
          curl -sS -L --max-time 30 -A "Mozilla/5.0" "${APP_URL}?wakeup=${TS}" || true
