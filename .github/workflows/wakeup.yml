name: Wake up Streamlit app

on:
  schedule:
    # 20분마다 실행 (UTC 기준)
    - cron: "*/20 * * * *"
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Streamlit app
        run: |
          APP_URL="https://book-url-autofill-webapp-grlgymkppd2pvqefwwrd7c.streamlit.app/"
          TS=$(date +%s)
          curl -L --fail --max-time 30 "${APP_URL}?wakeup=${TS}"
